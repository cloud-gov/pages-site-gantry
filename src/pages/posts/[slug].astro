---
export const prerender = true;
import "../../index.scss";
import { rld } from "../../rld";
import PostLayout from "../../layouts/PostLayout.astro";
import payloadFetch from "../../payload-fetch";

const { title, content } = Astro.props;

// The getStaticPaths() is required for static Astro sites.
// If using SSR, you will not need this function.
export async function getStaticPaths() {
  let data = await payloadFetch("posts?draft=true");
  let posts = await data.json();

  return posts.docs.map((post) => {
    return {
      params: { slug: post.slug },
      props: { title: post.title, content: post.content_html, rld },
    };
  });
}
---

<PostLayout title={title}>
  <article>
    <h1 set:html={title} />
    <section class="usa-prose" set:html={content} />
  </article>
</PostLayout>
